(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702,12,933],{9115:function(e,t,n){Promise.resolve().then(n.bind(n,1720))},1720:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),a=n(2265),o=n(7648),s=n(1012),i=n(1933),c=n(5765),l=n(3179);function u(){let[e,t]=(0,a.useState)("ethereum"),[n,u]=(0,a.useState)(null),[d,h]=(0,a.useState)([]),[m,f]=(0,a.useState)(!0),[g,x]=(0,a.useState)(()=>[]),w=[{id:"ethereum",name:"Ethereum",assets:["ETH"]},{id:"polygon",name:"Polygon",assets:["MATIC"]},{id:"arbitrum",name:"Arbitrum",assets:["ETH"]},{id:"optimism",name:"Optimism",assets:["ETH"]}];(0,a.useEffect)(()=>{p();try{x((0,c.listTxHistory)().slice(0,5))}catch(e){x([])}},[]),(0,a.useEffect)(()=>{n?y():(h([]),f(!1))},[e,n]);let p=async()=>{try{let e=await (0,s.tC)();u(e.address)}catch(e){console.error("Error loading wallet:",e),f(!1)}},y=async()=>{if(n){f(!0);try{var t;let r=((null===(t=w.find(t=>t.id===e))||void 0===t?void 0:t.assets)||[]).map(async t=>{try{let r=await (0,i.sb)(e,n,t),a=(parseFloat(r)/1e18).toFixed(6);return{asset:t,amount:a,network:e}}catch(n){return console.error("Error loading balance for ".concat(t,":"),n),{asset:t,amount:"0.000000",network:e}}}),a=await Promise.all(r);h(a)}catch(e){console.error("Error loading balances:",e),h([])}finally{f(!1)}}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Dashboard"}),(0,r.jsx)("div",{className:"flex space-x-2 mb-6",children:w.map(n=>(0,r.jsx)("button",{onClick:()=>t(n.id),className:"px-4 py-2 rounded-lg transition ".concat(e===n.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:n.name},n.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)(o.default,{href:"/deposit",className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow hover:shadow-lg transition",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Deposit"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Shielded deposit with zk proof-of-funds"})]}),(0,r.jsxs)(o.default,{href:"/withdraw",className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow hover:shadow-lg transition",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Withdraw"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Create withdrawal with selective disclosure"})]})]}),n&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Connected Wallet"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono break-all",children:n})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Balances"}),n&&(0,r.jsx)("button",{onClick:y,disabled:m,className:"text-sm text-blue-600 hover:text-blue-700 disabled:text-gray-400",children:"Refresh"})]}),n?m?(0,r.jsx)("p",{className:"text-gray-500",children:"Loading balances..."}):d.length>0?(0,r.jsx)("div",{className:"space-y-3",children:d.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:e.asset}),(0,r.jsx)("span",{children:e.amount})]},t))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No balances found"}):(0,r.jsx)("p",{className:"text-gray-500",children:"Connect your wallet to view balances"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),0===g.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No recent transactions"}):(0,r.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>{let n=e.hash?(0,l.Q)(e.network,e.hash):null;return(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-700 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium",children:[e.type.toUpperCase()," • ",e.amount," ",e.asset]}),(0,r.jsxs)("div",{className:"text-gray-500",children:[new Date(e.timestamp).toLocaleString()," • ",e.network]})]}),(0,r.jsx)("div",{className:"text-right",children:n?(0,r.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:text-blue-700",children:"View"}):(0,r.jsx)("span",{className:"text-gray-400",children:"No hash"})})]},t)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Relayer Status"}),(0,r.jsx)(o.default,{href:"/relayers",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All →"})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Active allowlisted relayers: 0"})]})]})})}},1933:function(e,t,n){"use strict";n.d(t,{BB:function(){return l},ES:function(){return u},Lg:function(){return d},nH:function(){return i},sb:function(){return c},screenAddress:function(){return s}});var r=n(257),a=n(6434).Buffer;function o(e){return({ethereum:r.env.NEXT_PUBLIC_ETHEREUM_RPC||"",polygon:r.env.NEXT_PUBLIC_POLYGON_RPC||"",arbitrum:r.env.NEXT_PUBLIC_ARBITRUM_RPC||"",optimism:r.env.NEXT_PUBLIC_OPTIMISM_RPC||""})[e]||""}async function s(e){let{screenAddress:t}=await n.e(961).then(n.bind(n,3961));return t(e)}async function i(e){return{proofData:"0x".concat(a.from(JSON.stringify(e)).toString("hex")),publicSignals:[e.assetSymbol,e.amount,e.senderAddress,e.nonce]}}async function c(e,t,r){let a=o(e);if(!a)throw Error("No RPC URL configured for ".concat(e));let{EvmAdapter:s}=await Promise.all([n.e(21),n.e(866)]).then(n.bind(n,4889)),i=new s;return await i.init({rpcUrl:a}),i.getBalance(t,r)}async function l(e){let t=o(e.network);if(!t)throw Error("No RPC URL configured for ".concat(e.network));let{EvmAdapter:r}=await Promise.all([n.e(21),n.e(866)]).then(n.bind(n,4889)),a=new r;return await a.init({rpcUrl:t}),a.deposit({assetSymbol:e.assetSymbol,amount:e.amount,address:e.address,proof:e.proof})}async function u(e){let t=o(e.network);if(!t)throw Error("No RPC URL configured for ".concat(e.network));let{EvmAdapter:r}=await Promise.all([n.e(21),n.e(866)]).then(n.bind(n,4889)),a=new r;return await a.init({rpcUrl:t}),a.withdraw({assetSymbol:e.assetSymbol,amount:e.amount,address:e.address,proof:e.proof,disclosure:e.disclosure})}async function d(e){let t;let{sendTransaction:r}=await n.e(12).then(n.bind(n,1012));if(e.value){let n=BigInt(e.value);t="0x".concat(n.toString(16))}return await r({to:e.to,data:e.data,value:t})}},3179:function(e,t,n){"use strict";function r(e,t){let n=t||"";switch(e){case"ethereum":return"https://etherscan.io/tx/".concat(n);case"polygon":return"https://polygonscan.com/tx/".concat(n);case"arbitrum":return"https://arbiscan.io/tx/".concat(n);case"optimism":return"https://optimistic.etherscan.io/tx/".concat(n);default:return null}}n.d(t,{Q:function(){return r}})},5765:function(e,t,n){"use strict";n.d(t,{At:function(){return u},Mi:function(){return i},NO:function(){return h},UK:function(){return o},YX:function(){return l},getAnonymitySetCount:function(){return d},listTxHistory:function(){return m},yJ:function(){return s},ze:function(){return c}});var r=n(6434).Buffer;function a(e){return r.from(e).toString("hex")}function o(e){let t=new Date().toISOString(),n=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),r="0x".concat(a("".concat(e.asset,":").concat(e.denomination,":").concat(n,":n"))),o="0x".concat(a("".concat(e.asset,":").concat(e.denomination,":").concat(n,":s"))),s=a("".concat(e.asset,"|").concat(e.denomination,"|").concat(r,"|").concat(o,"|").concat(t)).slice(0,8);return{note:"note-compliant-".concat(e.asset,"-").concat(e.denomination,"-").concat(n,"-").concat(s),asset:e.asset,denomination:e.denomination,nullifier:r,secret:o,checksum:s,createdAt:t}}function s(e){if(!e.startsWith("note-compliant-"))return!1;let t=e.split("-");if(t.length<6)return!1;let n=t[t.length-1];return!!/^[0-9a-fA-F]{8}$/.test(n)&&"string"==typeof a(t.slice(0,t.length-1).join("-")).slice(0,2)}function i(e){if(!s(e))return null;let t=e.split("-");return{asset:t[2]||"",denomination:t[3]||"",checksum:t[t.length-1]}}function c(e){let t="compliant-note-vault",n=localStorage.getItem(t),r=n?JSON.parse(n):[];r.push(e),localStorage.setItem(t,JSON.stringify(r))}function l(){let e=localStorage.getItem("compliant-note-vault");return e?JSON.parse(e):[]}function u(e){try{return!!l().find(t=>t.note===e)}catch(e){return!1}}function d(e,t){try{return l().filter(n=>n.asset===e&&n.denomination===t).length}catch(e){return 0}}function h(e){let t="compliant-tx-history",n=localStorage.getItem(t),r=n?JSON.parse(n):[];r.unshift(e),localStorage.setItem(t,JSON.stringify(r.slice(0,100)))}function m(){let e=localStorage.getItem("compliant-tx-history");return e?JSON.parse(e):[]}},1012:function(e,t,n){"use strict";async function r(){if(!window.ethereum)throw Error("No wallet extension found. Please install MetaMask.");try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(!e||0===e.length)throw Error("No accounts found");let t=e[0],n=await window.ethereum.request({method:"eth_chainId"}),r=parseInt(n,16);return{address:t,chainId:r,isConnected:!0}}catch(e){throw console.error("Wallet connection error:",e),e}}async function a(){if(!window.ethereum)return{address:null,chainId:null,isConnected:!1};try{let e=await window.ethereum.request({method:"eth_accounts"});if(!e||0===e.length)return{address:null,chainId:null,isConnected:!1};let t=e[0],n=await window.ethereum.request({method:"eth_chainId"}),r=parseInt(n,16);return{address:t,chainId:r,isConnected:!0}}catch(e){return console.error("Get wallet state error:",e),{address:null,chainId:null,isConnected:!1}}}async function o(e){if(!window.ethereum)throw Error("No wallet extension found");let t=await window.ethereum.request({method:"eth_accounts"});if(!t||0===t.length)throw Error("No wallet connected");try{let n={from:t[0],to:e.to};return e.value&&(n.value=e.value),e.data&&(n.data=e.data),e.gas&&(n.gas=e.gas),e.gasPrice&&(n.gasPrice=e.gasPrice),await window.ethereum.request({method:"eth_sendTransaction",params:[n]})}catch(e){var n;if(4001===e.code||(null===(n=e.message)||void 0===n?void 0:n.includes("User denied")))throw Error("Transaction rejected by user");throw e}}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;if(!window.ethereum)throw Error("No wallet extension found");let n=Date.now();for(;Date.now()-n<t;)try{let t=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[e]});if(t)return t;await new Promise(e=>setTimeout(e,2e3))}catch(e){console.error("Error polling for receipt:",e),await new Promise(e=>setTimeout(e,2e3))}throw Error("Transaction receipt timeout")}n.d(t,{connectWallet:function(){return r},ec:function(){return s},sendTransaction:function(){return o},tC:function(){return a}})},7648:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var r=n(2972),a=n.n(r)},257:function(e,t,n){"use strict";var r,a;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}},s=!0;try{t[e](o,o.exports,r),s=!1}finally{s&&delete n[e]}return o.exports}r.ab="//";var a=r(229);e.exports=a}()}},function(e){e.O(0,[434,972,971,117,744],function(){return e(e.s=9115)}),_N_E=e.O()}]);